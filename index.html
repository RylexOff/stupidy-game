<!DOCTYPE html>
<html>
<head>
 <title>Jeu de Reflexe</title>
 <style>
    body {
      background-color: #1a1a1a;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    #score {
      margin-top: 20px;
    }

    #letters {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      font-size: 36px;
    }

    h1 {
      margin: 0 10px;
    }

    #recommencer, #demarrer {
      background-color: #007bff;
      color: #fff;
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      cursor: pointer;
      margin-top: 20px;
    }

    #startButton {
      position: absolute;
      top: -100px;
    }
 </style>
</head>
<body>
 <h1>Jeu de Reflexe</h1>
 <p>Appuyez sur les touches correspondantes aux lettres affichées pour gagner des points. Votre score sera multiplié par le nombre de secondes restantes.</p>
 <h2 id="score">Score: 0</h2>
 <div id="letters"></div>
 <button id="recommencer" style="display: none;">Recommencer</button>
 <button id="demarrer" onclick="startGame()">Démarrer</button>
 <button id="startButton" onclick="openKeyboard()" style="display: none;"></button>
 <script>
    var score = 0;
    var timer;
    var letters = [];
    var currentLetterIndex = 0;
    var seconds = 2;
    var level = 1;
    var lettersToAdd = 1;
    var gameStarted = false;

    function generateLetters() {
      document.getElementById("letters").innerHTML = "";
      letters = [];
      for (var i = 0; i < lettersToAdd; i++) {
        var letter = String.fromCharCode(65 + Math.floor(Math.random() * 26));
        letters.push(letter);
        document.getElementById("letters").innerHTML += "<h1>" + letter + "</h1>";
      }
      currentLetterIndex = 0;
    }

    function checkLetter(event) {
      if (event.key.toUpperCase() === letters[currentLetterIndex]) {
        currentLetterIndex++;
        if (currentLetterIndex >= letters.length) {
          score += seconds * 100;
          document.getElementById("score").innerHTML = "Score: " + score;
          level++;

          if (seconds > 0.5) {
            seconds -= 0.1;
          } else {
            seconds = 2;
            lettersToAdd++;
          }

          generateLetters();
        }
      } else {
        gameOver();
      }
    }

    function gameOver() {
      clearTimeout(timer);
      document.getElementById("letters").innerHTML = "<h1>Game Over</h1><p>Score final: " + score + "</p>";
      document.getElementById("recommencer").style.display = "inline-block";
      document.onkeypress = null;
    }

    function restart() {
      score = 0;
      level = 1;
      seconds = 2;
      lettersToAdd = 1;
      generateLetters();
      document.getElementById("score").innerHTML = "Score: 0";
      document.getElementById("recommencer").style.display = "none";
      gameStarted = false;
      document.getElementById("demarrer").style.display = "inline-block";
    }

    function startGame() {
      if (!gameStarted) {
        gameStarted = true;
        document.getElementById("demarrer").style.display = "none";
        generateLetters();
        document.onkeypress = checkLetter;
        timer = setInterval(function () {
          seconds -= 0.1;
          if (seconds <= 0) {
            gameOver();
          }
        }, 100);
        openKeyboard();
      }
    }

    function openKeyboard() {
      var startButton = document.getElementById("startButton");
      startButton.focus();
    }

    document.getElementById("recommencer").onclick = restart;
 </script>
</body>
</html>
